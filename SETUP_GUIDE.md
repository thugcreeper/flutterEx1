# Metal Slug 2D æ¸¸æˆ - è®¾ç½®æŒ‡å—

## é¡¹ç›®ç»“æ„

ä½ çš„é¡¹ç›®å·²ç»è®¾ç½®å®Œæˆï¼ä»¥ä¸‹æ˜¯é¡¹ç›®çš„å®Œæ•´ç»“æ„å’ŒåŠŸèƒ½è¯´æ˜ã€‚

### æ–‡ä»¶å¤¹ç»“æ„
```
flutter_application_1/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                          # ä¸»åº”ç”¨å…¥å£ã€èœå•ç•Œé¢
â”‚   â”œâ”€â”€ game/
â”‚   â”‚   â””â”€â”€ metal_slug_game.dart           # æ¸¸æˆä¸»é€»è¾‘
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â””â”€â”€ character_select_screen.dart   # è§’è‰²é€‰æ‹©ç•Œé¢ï¼ˆ30ç§’å€’è®¡æ—¶ï¼‰
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ audio_manager.dart              # éŸ³é¢‘ç®¡ç†ç³»ç»Ÿ
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/                             # å­˜æ”¾æ¸¸æˆå›¾ç‰‡çš„æ–‡ä»¶å¤¹
â”‚   â””â”€â”€ audio/                              # å­˜æ”¾æ¸¸æˆéŸ³é¢‘çš„æ–‡ä»¶å¤¹
â”‚       â”œâ”€â”€ selectPlayer.mp3               # è§’è‰²é€‰æ‹©éŸ³ä¹
â”‚       â””â”€â”€ level bgm.mp3                  # æ¸¸æˆèƒŒæ™¯éŸ³ä¹
â”‚
â””â”€â”€ pubspec.yaml                            # é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆå·²æ›´æ–°ï¼‰
```

## åŠŸèƒ½è¯´æ˜

### 1. **ä¸»èœå•** (main.dart)
- âœ… æ¸¸æˆæ ‡é¢˜å’Œä»‹ç»
- âœ… "å¼€å§‹æ¸¸æˆ" æŒ‰é’®
- âœ… "æ•…äº‹ä¸æ“ä½œ" æŒ‰é’®ï¼ˆæ˜¾ç¤ºå®Œæ•´çš„æ“ä½œè¯´æ˜ï¼‰
- âœ… æ•…äº‹ç®€ä»‹

### 2. **è§’è‰²é€‰æ‹©ç•Œé¢** (character_select_screen.dart)
ä¸€ä¸ªé«˜åº¦å¯è§†åŒ–çš„è§’è‰²é€‰æ‹©ç•Œé¢ï¼ŒåŒ…å«ï¼š
- 4 ä¸ªè§’è‰²å¯é€‰ï¼š
  - ğŸ”´ **å£«å…µ** - å‡è¡¡å‹ï¼ˆæ”»é˜²ä¿±ä½³ï¼‰
  - ğŸ”µ **ç‹™å‡»æ‰‹** - è¿œç¨‹å‹ï¼ˆç²¾å‡†é«˜ä¼¤å®³ï¼‰
  - ğŸŸ¢ **é‡è£…å…µ** - é˜²å®ˆå‹ï¼ˆé˜²å¾¡åŠ›å¼ºï¼‰
  - ğŸŸ£ **å¿è€…** - æ•æ·å‹ï¼ˆé€Ÿåº¦å¿«ï¼‰
  
- ğŸµ **éŸ³ä¹ç³»ç»Ÿ**ï¼š
  - è¿›å…¥æ—¶è‡ªåŠ¨æ’­æ”¾ `selectPlayer.mp3`
  - 30ç§’å€’è®¡æ—¶ï¼Œæ—¶é—´åˆ°è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªè§’è‰²
  - ç‚¹å‡»é€‰æ‹©è§’è‰²åï¼ŒéŸ³ä¹æ·¡å‡ºå¹¶åˆ‡æ¢åˆ° `level bgm.mp3`
  - æ·¡å‡ºæ·¡å…¥æ•ˆæœä¼˜é›…æµç•…

### 3. **æ¸¸æˆç•Œé¢** (metal_slug_game.dart)
åŠŸèƒ½å®Œæ•´çš„ 2D å°„å‡»æ¸¸æˆï¼ŒåŒ…å«ï¼š
- âœ… ç©å®¶æ§åˆ¶å’Œç§»åŠ¨
- âœ… å°„å‡»ç³»ç»Ÿï¼ˆåŒ…æ‹¬å‘ä¸Šç„å‡†å°„å‡»ï¼‰
- âœ… æ‰‹æ¦´å¼¹ç³»ç»Ÿ
- âœ… æ•Œäºº AI
- âœ… ç¢°æ’æ£€æµ‹
- âœ… åˆ†æ•°ç³»ç»Ÿ
- âœ… å¤šå…³å¡

### 4. **éŸ³é¢‘ç®¡ç†** (audio_manager.dart)
ä¸€ä¸ªå®Œæ•´çš„å•ä¾‹éŸ³é¢‘ç®¡ç†ç³»ç»Ÿï¼Œæä¾›ï¼š
- âœ… æ’­æ”¾ã€æš‚åœã€åœæ­¢
- âœ… éŸ³é‡æ§åˆ¶
- âœ… å¾ªç¯æ’­æ”¾è®¾ç½®
- âœ… **æ·¡å‡ºæ•ˆæœ** (fadeOut)
- âœ… **æ·¡å…¥æ•ˆæœ** (fadeIn)
- âœ… **äº¤å‰æ·¡åŒ–** (crossFade) - å®Œç¾ç”¨äºéŸ³ä¹åˆ‡æ¢

## æ“ä½œæ§åˆ¶

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| **A** | å‘å·¦èµ° |
| **D** | å‘å³èµ° |
| **W** | å‘ä¸Šç„å‡† |
| **S** | è¹²ä¸‹ |
| **K** | å‘ä¸Šè·³è·ƒ |
| **J** | å¼€ç«å°„å‡» |
| **L** | ä¸¢æ‰‹æ¦´å½ˆ |

## è®¾ç½®æ­¥éª¤

### æ­¥éª¤ 1: å‡†å¤‡éŸ³é¢‘æ–‡ä»¶
1. è·å–æˆ–åˆ›å»º `selectPlayer.mp3` å’Œ `level bgm.mp3` æ–‡ä»¶
2. å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨ `assets/audio/` æ–‡ä»¶å¤¹ä¸­

### æ­¥éª¤ 2: å‡†å¤‡å›¾ç‰‡èµ„æºï¼ˆå¯é€‰ï¼‰
å¦‚æœä½ æœ‰è§’è‰²æˆ–æ•Œäººçš„å›¾ç‰‡ï¼Œæ”¾åœ¨ `assets/images/` æ–‡ä»¶å¤¹ä¸­

### æ­¥éª¤ 3: æ›´æ–°ä¾èµ–
```bash
cd flutter_application_1
flutter pub get
```

### æ­¥éª¤ 4: è¿è¡Œåº”ç”¨
```bash
# åœ¨ Windows ä¸Š
flutter run -d windows

# æˆ–åœ¨ Web ä¸Š
flutter run -d chrome

# æˆ–åœ¨ Android ä¸Š
flutter run -d <device-id>
```

## ä»£ç ä½¿ç”¨ç¤ºä¾‹

### æ’­æ”¾éŸ³é¢‘
```dart
final audioManager = AudioManager();
await audioManager.play('assets/audio/selectPlayer.mp3');
```

### æ·¡å…¥æ·¡å‡º
```dart
// æ·¡å‡º
await audioManager.fadeOut(duration: Duration(milliseconds: 1500));

// æ·¡å…¥
await audioManager.fadeIn(duration: Duration(seconds: 2), targetVolume: 1.0);

// äº¤å‰æ·¡åŒ–ï¼ˆæ·¡å‡ºä¸€é¦–æ­Œå†æ·¡å…¥å¦ä¸€é¦–ï¼‰
await audioManager.crossFade(
  newTrackPath: 'assets/audio/level bgm.mp3',
  fadeDuration: Duration(milliseconds: 1500),
  newVolume: 1.0,
);
```

### éŸ³é‡æ§åˆ¶
```dart
// è®¾ç½®éŸ³é‡ï¼ˆ0.0 - 1.0ï¼‰
await audioManager.setVolume(0.5);

// å¾ªç¯æ’­æ”¾
await audioManager.setLooping(true);
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è‡ªå®šä¹‰è§’è‰²æ•°é‡ï¼Ÿ
A: ç¼–è¾‘ `lib/screens/character_select_screen.dart` ä¸­çš„ `characters` List

### Q: å¦‚ä½•æ”¹å˜å€’è®¡æ—¶æ—¶é—´ï¼Ÿ
A: ç¼–è¾‘ `_CharacterSelectScreenState` ä¸­çš„ `_timeRemaining = 30` è¿™ä¸€è¡Œ

### Q: å¦‚ä½•æ·»åŠ æ›´å¤šéŸ³æ•ˆï¼Ÿ
A: 
1. å°†éŸ³é¢‘æ–‡ä»¶æ”¾åœ¨ `assets/audio/` ä¸­
2. ä½¿ç”¨ `AudioManager().play('assets/audio/your_sound.mp3')` æ’­æ”¾

### Q: å¦‚ä½•ä¿®æ”¹æ¸¸æˆéš¾åº¦ï¼Ÿ
A: ç¼–è¾‘ `lib/game/metal_slug_game.dart` ä¸­çš„å¸¸æ•°å€¼

## ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

1. **æ·»åŠ æ›´å¤šå…³å¡** - ä¿®æ”¹æ•Œäººæ•°é‡å’Œä½ç½®
2. **æ·»åŠ åŠ›é‡æå‡** - ç”Ÿå‘½å€¼ã€å¼¹è¯ã€åˆ†æ•°å€æ•°
3. **æ·»åŠ æ›´å¤šæ•Œäººç±»å‹** - ä¸åŒçš„ AI è¡Œä¸º
4. **æ·»åŠ æ¸¸æˆéŸ³æ•ˆ** - å°„å‡»å£°ã€çˆ†ç‚¸å£°ç­‰
5. **æ·»åŠ é«˜åˆ†æ’è¡Œæ¦œ** - ä½¿ç”¨æœ¬åœ°å­˜å‚¨æˆ–äº‘ç«¯
6. **æ·»åŠ è§’è‰²ç‰¹æŠ€** - ç‹¬ç‰¹çš„æŠ€èƒ½å’Œèƒ½åŠ›
7. **æ”¹è¿›å›¾å½¢** - ä½¿ç”¨çœŸå®çš„è§’è‰²å’Œæ•Œäººå›¾ç‰‡

## å¸¸ç”¨å‘½ä»¤

```bash
# æ¸…ç†æ„å»ºæ–‡ä»¶
flutter clean

# åˆ·æ–°ä¾èµ–
flutter pub get

# è¿è¡Œåº”ç”¨
flutter run

# æ„å»º APKï¼ˆAndroidï¼‰
flutter build apk

# æ„å»º iOS
flutter build ios

# æ„å»º Web
flutter build web

# æ£€æŸ¥é¡¹ç›®é—®é¢˜
flutter doctor
```

## è”ç³»å’Œæ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·å‚è€ƒ Flutter å®˜æ–¹æ–‡æ¡£ï¼š
- Flutter å®˜ç½‘ï¼šhttps://flutter.dev
- æ–‡æ¡£ï¼šhttps://docs.flutter.dev
- ç¤¾åŒºè®ºå›ï¼šhttps://github.com/flutter/flutter/discussions

---

ç¥ä½ çš„æ¸¸æˆå¼€å‘æ„‰å¿«ï¼ğŸ®âœ¨
